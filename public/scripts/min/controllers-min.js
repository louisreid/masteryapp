var masteryControllers=angular.module("masteryControllers",[]);masteryControllers.controller("mainCtrl",function(e,o,n,t,i,a){function r(e){e.target.playVideo()}e.username="louis";var s=document.createElement("script");s.src="https://www.youtube.com/iframe_api";var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(s,d),e.previewVideo=function(){n([e.videoURL],function(o){e.currentVideo=o.data.items[0].snippet},!1),e.chosenVideoURL=e.videoURL},e.submitVideo=function(){e.userData.videos.push(a([e.chosenVideoURL],!1)),i(e.username,e.userData.videos),n(e.userData.videos,function(o){e.videos=o.data.items},!0)},e.removeVideo=function(e){console.log("Removing video "+e)},t(e.username,function(o){e.userData=o.data[0];var t=[];angular.forEach(e.userData.videos,function(e){t.push(e.id)}),n(t,function(o){e.videos=o.data.items,angular.forEach(e.videos,function(o,n){o.comments=e.userData.videos[n].comments}),console.log(e.videos)},!0)});var u=!1;window.onYouTubeIframeAPIReady=function(){u=!0},e.expandVideo=function(o){console.log(o);var n=setInterval(function(){u===!0&&(clearInterval(n),e.videos[o].player=new YT.Player("playerVideo"+o,{height:"300",width:"480",videoId:e.videos[o].id,events:{onReady:r,onStateChange:function(n){var t;1===n.data?t=setInterval(function(){var n=e.videos[o].player.getCurrentTime();e.videos[o].currentTime=n,document.getElementById("player"+o+"Time").innerHTML=Math.round(e.videos[o].currentTime)+"s"},1e3):clearInterval(t)}}}))},100)},e.submitComment=function(o){e.videos[o].comments.push({time:Math.round(e.videos[o].currentTime),comment:e.videos[o].commentText}),e.commentText=""},e.seekTo=function(o,n){e.videos[n].player.seekTo(o,!0),e.videos[n].player.pauseVideo()}});